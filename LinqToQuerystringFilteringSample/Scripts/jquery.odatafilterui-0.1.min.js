(function(e){e.fn.oDataFilterUI=function(t){this.attr("type","hidden");var n=this.wrap(e("<div>")).parent();var r=e("<span>").html("There are currently no filters applied").prependTo(n);r.before("<!-- ko if: !FilterRows() || FilterRows().length == 0 -->");r.after("<!-- /ko -->");var i=e("<div>",{"data-bind":"foreach: FilterRows"}).insertAfter(this);var s=e("<ol>").appendTo(i);var o=e("<select>",{"class":"filterField","data-bind":"value: Field, options: $parent.Fields, optionsText: 'text'"}).appendTo(s).wrap(e("<li>"));var u=e("<select>",{"class":"filterOperator","data-bind":"value: Operator, options: OperatorsList, optionsText: 'text', optionsValue: 'value'"}).appendTo(s).wrap(e("<li>"));var a=e("<input>",{"class":"filterValue",type:"text","data-bind":"value: Value"}).appendTo(s).wrap(e("<li>")).parent();a.before("<!-- ko if: (Field() && Field().type == 'string') || !Field() -->");a.after("<!-- /ko -->");var f=e("<input>",{"class":"filterValue",type:"number","data-bind":"value: Value"}).appendTo(s).wrap(e("<li>")).parent();f.before("<!-- ko if: Field() && Field().type == 'int' -->");f.after("<!-- /ko -->");var l=e("<input>",{"class":"filterValue",type:"datetime-local","data-bind":"value: Value"}).appendTo(s).wrap(e("<li>")).parent();l.before("<!-- ko if: Field() && Field().type == 'datetime' -->");l.after("<!-- /ko -->");var c=e("<input>",{"class":"filterValue",type:"checkbox","data-bind":"checked: Value"}).appendTo(s).wrap(e("<li>")).parent();c.before("<!-- ko if: Field() && Field().type == 'bool' -->");c.after("<!-- /ko -->");var h=e("<a>",{"class":"filterRemove",href:"#","data-bind":"click: $parent.removeFilter"}).html("remove").appendTo(s).wrap(e("<li>"));var p=e("<a>",{"class":"addAnother",href:"#","data-bind":"click: addAnother"}).html("add").appendTo(n);var d=function(){var e=ko.observable();var t=ko.observable();var n=ko.observable();var r=ko.computed(function(){return e().value},null,{deferEvaluation:true});var i=ko.computed(function(){var t=[{text:"Equals",value:"eq"},{text:"Not equals",value:"ne"}];var n=e()?e().type:"string";switch(n){case"int":case"datetime":t.push({text:"Greater than",value:"gt"});t.push({text:"Greater than or equals",value:"ge"});t.push({text:"Less than",value:"lt"});t.push({text:"Less than or equals",value:"le"});break;case"string":t.push({text:"Starts With",value:"startswith"});t.push({text:"Ends With",value:"endswith"});t.push({text:"Contains",value:"contains"});break}return t},null,{deferEvaluation:true});var s={};s.Field=e;s.FieldName=r;s.Operator=t;s.Value=n;s.OperatorsList=i;return s};var v=e.extend({Fields:[],fieldNameModifier:function(e){return e}},t);var m=ko.observableArray([]);var g=ko.observableArray(v.Fields);var y=function(e){if(m().length>0){m.remove(e)}};var p=function(){m.push(d())};var b=ko.computed(function(){var e=[];for(var t in m()){var n=m()[t];var r=v.fieldNameModifier(n.FieldName());var i=r+" "+n.Operator()+" ";switch(n.Field().type){case"string":var s="'"+(n.Value()?n.Value():"")+"'";switch(n.Operator()){case"startswith":i="startswith("+r+","+s+")";break;case"endswith":i="endswith("+r+","+s+")";break;case"contains":i="substringof("+s+","+r+")";break;default:i=i+"'"+(n.Value()?n.Value():"")+"'"}e.push(i);break;case"int":i=i+(n.Value()?n.Value():0);e.push(i);break;case"datetime":i=i+"datetime'"+(n.Value()?n.Value():"1753-01-01T00:00")+"'";e.push(i);break;case"bool":i=i+(n.Value()?n.Value():false);e.push(i);break}}if(e.length>0){return"$filter="+e.join(" and ")}return""},null,{deferEvaluation:true});if(v.Model){this.Model=v.Model}else{this.Model={};this.Model.FilterRows=m;this.Model.Fields=g;this.Model.removeFilter=y;this.Model.addAnother=p;this.Model.getODataFilter=b}ko.applyBindings(this.Model,n.get(0));return this}})(jQuery)